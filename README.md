# ü§ñ Telegram Shop Bot

Telegram –±–æ—Ç –¥–ª—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞ —Å –ø–æ–ª–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º –ø–æ–∫—É–ø–æ–∫, –∫–æ—Ä–∑–∏–Ω—ã, –∑–∞–∫–∞–∑–æ–≤ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–ø–∏—Å—å—é –≤ Excel.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏](#-–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏)
- [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏](#-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫](#-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–∑–∞–ø—É—Å–∫)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#Ô∏è-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ](#-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
- [–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞](#-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
- [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [Docker](#-docker)
- [–õ–∏—Ü–µ–Ω–∑–∏—è](#-–ª–∏—Ü–µ–Ω–∑–∏—è)

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- üõçÔ∏è **–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤**: –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ —Ç–æ–≤–∞—Ä–æ–≤ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
- üõí **–ö–æ—Ä–∑–∏–Ω–∞**: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º
- üì¶ **–ó–∞–∫–∞–∑—ã**: –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ —Å –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- üìä **Excel –æ—Ç—á–µ—Ç—ã**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–ø–∏—Å—å –≤—Å–µ—Ö –∑–∞–∫–∞–∑–æ–≤ –≤ Excel —Ñ–∞–π–ª
- ‚ùì **FAQ**: –°–∏—Å—Ç–µ–º–∞ —á–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
- üîê **–ü–æ–¥–ø–∏—Å–∫–∏**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –∫–∞–Ω–∞–ª—ã –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
- üé® **–ò–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: –£–¥–æ–±–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è —Å inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π
- üèóÔ∏è **–ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å–ª–æ–∏ Domain, Application, Infrastructure

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Framework**: Aiogram 3.20.0, Python 3.13
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL —Å SQLAlchemy 2.0.41
- **DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**: Dishka 1.6.0
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: Dynaconf 3.2.11
- **Excel**: OpenPyXL 3.1.5
- **HTTP –∫–ª–∏–µ–Ω—Ç**: aiohttp 3.11.18
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: pytest 8.4.1, pytest-asyncio 0.25.0
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è**: Docker & Docker Compose

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```text
TelegramShop/
‚îú‚îÄ‚îÄ üìÑ Dockerfile               # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ üìÑ requirements.txt         # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ üìÑ pytest.ini              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤
‚îú‚îÄ‚îÄ üìÅ configs/                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ config.toml             # –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ secret.toml             # –°–µ–∫—Ä–µ—Ç–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–Ω–µ –≤ git)
‚îú‚îÄ‚îÄ üìÅ tests/                   # E2E —Ç–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ conftest.py             # –§–∏–∫—Å—Ç—É—Ä—ã –¥–ª—è —Ç–µ—Å—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ e2e/                    # End-to-end —Ç–µ—Å—Ç—ã
‚îÇ       ‚îú‚îÄ‚îÄ routers/            # –¢–µ—Å—Ç—ã —Ä–æ—É—Ç–µ—Ä–æ–≤
‚îÇ       ‚îú‚îÄ‚îÄ usecases/           # –¢–µ—Å—Ç—ã –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
‚îÇ       ‚îî‚îÄ‚îÄ integration/        # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îî‚îÄ‚îÄ üìÅ src/                     # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
    ‚îú‚îÄ‚îÄ üìÑ config.py            # –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    ‚îú‚îÄ‚îÄ üìÑ config_schema.py     # –°—Ö–µ–º–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    ‚îú‚îÄ‚îÄ üìÅ bootstrap/           # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    ‚îÇ   ‚îú‚îÄ‚îÄ main.py             # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
    ‚îÇ   ‚îú‚îÄ‚îÄ container.py        # DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
    ‚îÇ   ‚îî‚îÄ‚îÄ providers/          # DI –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
    ‚îú‚îÄ‚îÄ üìÅ domain/              # –î–æ–º–µ–Ω–Ω—ã–π —Å–ª–æ–π
    ‚îÇ   ‚îú‚îÄ‚îÄ entities/           # –°—É—â–Ω–æ—Å—Ç–∏
    ‚îÇ   ‚îî‚îÄ‚îÄ repositories/       # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
    ‚îú‚îÄ‚îÄ üìÅ application/         # –°–ª–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    ‚îÇ   ‚îú‚îÄ‚îÄ usecases/           # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
    ‚îÇ   ‚îú‚îÄ‚îÄ interfaces/         # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
    ‚îÇ   ‚îú‚îÄ‚îÄ dtos/               # –û–±—ä–µ–∫—Ç—ã –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö
    ‚îÇ   ‚îî‚îÄ‚îÄ mappers/            # –ú–∞–ø–ø–µ—Ä—ã
    ‚îú‚îÄ‚îÄ üìÅ infrastructure/      # –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π —Å–ª–æ–π
    ‚îÇ   ‚îú‚îÄ‚îÄ database/           # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models/         # SQLAlchemy –º–æ–¥–µ–ª–∏
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ repositories/   # –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
    ‚îÇ   ‚îú‚îÄ‚îÄ telegram/           # Telegram –∫–ª–∏–µ–Ω—Ç
    ‚îÇ   ‚îú‚îÄ‚îÄ http/               # HTTP –∫–ª–∏–µ–Ω—Ç—ã
    ‚îÇ   ‚îú‚îÄ‚îÄ excel/              # Excel –∫–ª–∏–µ–Ω—Ç
    ‚îÇ   ‚îî‚îÄ‚îÄ logging/            # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
    ‚îî‚îÄ‚îÄ üìÅ presentation/        # –°–ª–æ–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
        ‚îî‚îÄ‚îÄ telegram/           # Telegram –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            ‚îú‚îÄ‚îÄ routers/        # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
            ‚îú‚îÄ‚îÄ keyboards/      # –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã
            ‚îú‚îÄ‚îÄ middlewares/    # Middleware
            ‚îî‚îÄ‚îÄ states/         # FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è
```

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker –∏ Docker Compose
- Git

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è**

   ```bash
   git clone <repository-url>
   cd TelegramShop
   ```

2. **–°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏**

   ```bash
   # –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª configs/secret.toml
   cp configs/config.toml configs/secret.toml
   ```

   –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `configs/secret.toml`:

   ```toml
   [default.database]
   user = "your_db_user"
   password = "your_db_password"
   name = "your_db_name"
   
   [default.telegram]
   token = "your_bot_token"
   chats_id = ["@your_channel"]
   ```

3. **–ó–∞–ø—É—Å–∫ —Å Docker Compose**

   ```bash
   # –ò–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
   docker compose up -d
   ```

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã**
   - –ë–æ—Ç –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –≤ Telegram
   - –õ–æ–≥–∏: `docker compose logs -f telegram-bot`
   - Excel –æ—Ç—á–µ—Ç—ã: `./reports/orders.xlsx`

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –∑–∞–ø—É—Å–∫ (–±–µ–∑ Docker)

1. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**

   ```bash
   pip install -r requirements.txt
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL**

   ```bash
   # –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö PostgreSQL
   createdb your_db_name
   ```

3. **–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞**

   ```bash
   python -m src.bootstrap.main
   ```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Dynaconf** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π.

### –§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

- `configs/config.toml` - –æ—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- `configs/secret.toml` - —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–Ω–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ git)

### –û–∫—Ä—É–∂–µ–Ω–∏—è

- `default` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- `production` - –ø—Ä–æ–¥–∞–∫—à–Ω –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
ENV_FOR_DYNACONF=production  # –í—ã–±–æ—Ä –æ–∫—Ä—É–∂–µ–Ω–∏—è
```

### –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```toml
[default]
log_level = "DEBUG"
debug = true

[default.database]
host = "localhost"
port = 5432
user = "postgres"
password = "password"
name = "telegram_shop"

[default.telegram]
token = "your_bot_token"
chats_id = ["@your_channel"]

[production]
log_level = "WARNING"
debug = false

[production.database]
host = "postgres"  # Docker service name
```

## üìñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

- `/start` - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **üì¶ –ö–∞—Ç–∞–ª–æ–≥** - –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ —Ç–æ–≤–∞—Ä–æ–≤
- **üõí –ö–æ—Ä–∑–∏–Ω–∞** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω–æ–π –ø–æ–∫—É–ø–æ–∫
- **‚ùì FAQ** - –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã

### –ü—Ä–æ—Ü–µ—Å—Å –ø–æ–∫—É–ø–∫–∏

1. **–í—ã–±–æ—Ä —Ç–æ–≤–∞—Ä–∞**: –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º ‚Üí –≤—ã–±–æ—Ä —Ç–æ–≤–∞—Ä–∞
2. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É**: –£–∫–∞–∑–∞–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ ‚Üí –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ
3. **–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞**: –í–≤–æ–¥ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö ‚Üí –≤—ã–±–æ—Ä –æ–ø–ª–∞—Ç—ã
4. **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ**: –ó–∞–∫–∞–∑ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î –∏ Excel

### Excel –æ—Ç—á–µ—Ç—ã

–í—Å–µ –∑–∞–∫–∞–∑—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ —Ñ–∞–π–ª `reports/orders.xlsx` —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏:

- –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –∑–∞–∫–∞–∑–∞
- ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤
- –û–±—â–∞—è —Å—É–º–º–∞

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç —Å–ª–µ–¥—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º **Clean Architecture**:

- **Domain**: –ë–∏–∑–Ω–µ—Å-—Å—É—â–Ω–æ—Å—Ç–∏ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
- **Application**: Use Cases –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
- **Infrastructure**: –í–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–ë–î, API, —Ñ–∞–π–ª—ã)
- **Presentation**: Telegram –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### Dependency Injection

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **Dishka** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏:

```python
# –ü—Ä–∏–º–µ—Ä –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
class UseCasesProvider(Provider):
    @provide(scope=Scope.REQUEST)
    async def create_order_use_case(
        self, cart_repo: CartRepositoryInterface, 
        order_repo: OrderRepositoryInterface,
        excel_client: ExcelClientInterface
    ) -> CreateOrderUseCase:
        return CreateOrderUseCase(cart_repo, order_repo, excel_client)
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

1. –°–æ–∑–¥–∞–π—Ç–µ —Å—É—â–Ω–æ—Å—Ç—å –≤ `domain/entities/`
2. –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –≤ `domain/repositories/`
3. –†–µ–∞–ª–∏–∑—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤ `infrastructure/database/repositories/`
4. –°–æ–∑–¥–∞–π—Ç–µ Use Case –≤ `application/usecases/`
5. –î–æ–±–∞–≤—å—Ç–µ —Ä–æ—É—Ç–µ—Ä –≤ `presentation/telegram/routers/`
6. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –≤ DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```text
tests/
‚îú‚îÄ‚îÄ conftest.py                 # –ë–∞–∑–æ–≤—ã–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã
‚îî‚îÄ‚îÄ e2e/                       # End-to-end —Ç–µ—Å—Ç—ã
    ‚îú‚îÄ‚îÄ routers/               # –¢–µ—Å—Ç—ã use cases
    ‚îú‚îÄ‚îÄ usecases/              # –¢–µ—Å—Ç—ã –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
    ‚îî‚îÄ‚îÄ integration/           # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
pytest

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è
pytest tests/e2e/usecases/
pytest tests/e2e/integration/

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º
pytest --cov=src
```

### –ü—Ä–∏–º–µ—Ä—ã —Ç–µ—Å—Ç–æ–≤

```python
@pytest.mark.asyncio
async def test_create_order_success(sample_cart_item):
    # Arrange
    mock_cart_repo = AsyncMock()
    mock_cart_repo.get_cart_items = AsyncMock(return_value=[sample_cart_item])
    
    use_case = CreateOrderUseCase(mock_cart_repo, mock_order_repo, mock_excel_client)
    
    # Act
    await use_case.execute(12345, "John Doe", "123 Main St", "+1234567890", "Card")
    
    # Assert
    mock_cart_repo.get_cart_items.assert_called_once_with(12345)
```

## üê≥ Docker

### Dockerfile

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Python 3.13-slim –æ–±—Ä–∞–∑ —Å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π.

### Docker Compose –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

–ë–æ—Ç –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ –æ–±—â–∏–π docker-compose.yaml:

```yaml
telegram-bot:
  build: ./TelegramShop
  container_name: telegram-bot
  restart: always
  depends_on:
    - postgres
    - django
  volumes:
    - ./logs:/app/logs
    - ./reports:/app/reports
  environment:
    - ENV_FOR_DYNACONF=production
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```bash
# –õ–æ–≥–∏ –±–æ—Ç–∞
docker compose logs -f telegram-bot

# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker compose ps

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞
docker compose restart telegram-bot
```

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ MIT License - —Å–º. —Ñ–∞–π–ª [LICENSE](LICENSE) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.
